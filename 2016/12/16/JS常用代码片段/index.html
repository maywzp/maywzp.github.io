<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.cat.net/css?family=Roboto Slab:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="javascript," />










<meta name="description" content="Javascript 片段积累">
<meta name="keywords" content="javascript">
<meta property="og:type" content="article">
<meta property="og:title" content="JS常用代码片段">
<meta property="og:url" content="https://maywzp.github.io/2016/12/16/JS常用代码片段/index.html">
<meta property="og:site_name" content="MayWzp">
<meta property="og:description" content="Javascript 片段积累">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://oizt3fjv8.bkt.clouddn.com/javascriptno2.jpg">
<meta property="og:updated_time" content="2016-12-16T08:44:28.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JS常用代码片段">
<meta name="twitter:description" content="Javascript 片段积累">
<meta name="twitter:image" content="http://oizt3fjv8.bkt.clouddn.com/javascriptno2.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.3',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: 'undefined',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://maywzp.github.io/2016/12/16/JS常用代码片段/"/>





  <title>JS常用代码片段 | MayWzp</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">MayWzp</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description"></h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://maywzp.github.io/2016/12/16/JS常用代码片段/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Maywzp">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MayWzp">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">JS常用代码片段</h2>
        

        <div class="post-meta">
          
          <span class="post-time">
            
            <time title="更新于" itemprop="dateCreated datePublished" datetime="2016-12-16T16:44:28+08:00">
              2016-12-16
            </time>
          </span>

          

          
            
          

          
          

          

          

          
              <div class="post-description">
                  Javascript 片段积累
              </div>
          

        </div>
      </header>
    

    
    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
        <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
          
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox"
                 href="http://oizt3fjv8.bkt.clouddn.com/javascriptno2.jpg" rel="gallery_cjntx34ca000xs0xtlu2axln0"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="http://oizt3fjv8.bkt.clouddn.com/javascriptno2.jpg" itemprop="contentUrl"/>
              </a>
            
          

          
          </div>
        </div>
      

      
        <h1 id="bao-liu-liang-wei-xiao-shu"><a href="#保留两位小数" class="headerlink" title="保留两位小数"></a>保留两位小数</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">number.toFixed(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h1 id="jie-jue-shu-zu-yin-yong-wen-ti"><a href="#解决数组引用问题" class="headerlink" title="解决数组引用问题"></a>解决数组引用问题</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.concat() <span class="comment">//数组复制</span></span><br></pre></td></tr></table></figure>
<h1 id="jie-jue-dui-xiang-yin-yong-wen-ti"><a href="#解决对象引用问题" class="headerlink" title="解决对象引用问题"></a>解决对象引用问题</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.assign(&#123;&#125;, obj) <span class="comment">//对象复制</span></span><br></pre></td></tr></table></figure>
<h1 id="huo-qu-xia-la-kuang-wen-zi"><a href="#获取下拉框文字" class="headerlink" title="获取下拉框文字"></a>获取下拉框文字</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#FinanceCostType"</span>).find(<span class="string">"option:selected"</span>).text();</span><br></pre></td></tr></table></figure>
<h1 id="huo-qu-xia-la-kuang-suo-yin"><a href="#获取下拉框索引" class="headerlink" title="获取下拉框索引"></a>获取下拉框索引</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"select[name='select1']"</span>).get(<span class="number">0</span>).selectedIndex;</span><br></pre></td></tr></table></figure>
<h1 id="zu-zhi-mo-ren-shi-jian"><a href="#阻止默认事件" class="headerlink" title="阻止默认事件"></a>阻止默认事件</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.preventDefault();</span><br></pre></td></tr></table></figure>
<h1 id="zu-zhi-shi-jian-mou-pao"><a href="#阻止事件冒泡" class="headerlink" title="阻止事件冒泡"></a>阻止事件冒泡</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.stopPropagation();</span><br></pre></td></tr></table></figure>
<h1 id="dong-tai-yin-ru-javascript"><a href="#动态引入JavaScript" class="headerlink" title="动态引入JavaScript"></a>动态引入JavaScript</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>)</span><br><span class="line">script.setAttribute(<span class="string">'type'</span>, <span class="string">'text/javascript'</span>)</span><br><span class="line">script.setAttribute(<span class="string">'src'</span>, <span class="string">''</span>)</span><br><span class="line"><span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>].appendChild(script)</span><br></pre></td></tr></table></figure>
<h1 id="uri-bian-ma-fang-zhi-luan-ma"><a href="#uri编码-防止乱码" class="headerlink" title="uri编码:防止乱码"></a>uri编码:防止乱码</h1><h2 id="jia-ma-bi-xu-tao-liang-ceng"><a href="#加码-必须套两层-。" class="headerlink" title="加码(必须套两层)。"></a>加码(必须套两层)。</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> login_name = <span class="built_in">encodeURI</span>(<span class="built_in">encodeURI</span>(login_name));</span><br></pre></td></tr></table></figure>
<h2 id="jie-ma"><a href="#解码" class="headerlink" title="解码"></a>解码</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">js:   loginName = <span class="built_in">decodeURI</span>(<span class="built_in">decodeURI</span>(loginName));</span><br><span class="line">Java：loginName = java.net.URLDecoder.decode(loginName,<span class="string">"UTF-8"</span>);</span><br></pre></td></tr></table></figure>
<h1 id="json-cao-zuo"><a href="#JSON操作" class="headerlink" title="JSON操作"></a>JSON操作</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">eval</span>(<span class="string">"("</span>+data+<span class="string">")"</span>)</span><br><span class="line">$.param(data)</span><br><span class="line"><span class="built_in">JSON</span>.parse(str);</span><br><span class="line"><span class="built_in">JSON</span>.stringify(obj);</span><br></pre></td></tr></table></figure>
<h1 id="zi-dong-hong-fa-shi-jian"><a href="#自动触发事件" class="headerlink" title="自动触发事件"></a>自动触发事件</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#loadBtn'</span>).trigger(<span class="string">"click"</span>);</span><br></pre></td></tr></table></figure>
<h1 id="jin-qian-ge-shi-hua-jia-qian-fen-hao-bao-liu-liang-wei-xiao-shu"><a href="#金钱格式化（加千分号，保留两位小数）" class="headerlink" title="金钱格式化（加千分号，保留两位小数）"></a>金钱格式化（加千分号，保留两位小数）</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> money = (money.toFixed(<span class="number">2</span>) + <span class="string">''</span>).replace(<span class="regexp">/\d&#123;1,3&#125;(?=(\d&#123;3&#125;)+(\.\d*)?$)/g</span>, <span class="string">'$&amp;,'</span>);</span><br></pre></td></tr></table></figure>
<h1 id="qian-jin"><a href="#前进" class="headerlink" title="前进"></a>前进</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.history.go(<span class="number">-1</span>)</span><br><span class="line">history.go(<span class="number">-1</span>)</span><br></pre></td></tr></table></figure>
<h1 id="hou-tui"><a href="#后退" class="headerlink" title="后退"></a>后退</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.history.back()</span><br><span class="line">history.back()</span><br></pre></td></tr></table></figure>
<h1 id="shua-xin"><a href="#刷新" class="headerlink" title="刷新"></a>刷新</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.location.reload();</span><br></pre></td></tr></table></figure>
<h1 id="hou-tui-bing-shua-xin-ye-mian"><a href="#后退并刷新页面" class="headerlink" title="后退并刷新页面"></a>后退并刷新页面</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.location=<span class="built_in">document</span>.referrer; (返回导航到当前网页的超链接所在网页的URL)</span><br></pre></td></tr></table></figure>
<h1 id="fu-xuan-kuang-quan-xuan"><a href="#复选框全选" class="headerlink" title="复选框全选"></a>复选框全选</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#checkAll"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">'input[name="subBox"]'</span>).attr(<span class="string">"checked"</span>,<span class="keyword">this</span>.checked);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> $subBox = $(<span class="string">"input[name='subBox']"</span>);</span><br><span class="line">$subBox.click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">"#checkAll"</span>).attr(<span class="string">"checked"</span>,$subBox.length == $(<span class="string">"input[name='subBox']:checked"</span>).length ? <span class="literal">true</span> : <span class="literal">false</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h1 id="form-biao-dan"><a href="#form表单" class="headerlink" title="form表单"></a>form表单</h1><h2 id="biao-tou"><a href="#表头" class="headerlink" title="表头"></a>表头</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">headers : &#123;<span class="string">'Content-Type'</span>: <span class="string">'application/json;charset=utf-8'</span>&#125;,</span><br></pre></td></tr></table></figure>
<h2 id="chong-zhi-biao-dan"><a href="#重置表单" class="headerlink" title="重置表单"></a>重置表单</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">reset: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">"#StartTime"</span>).val($(<span class="string">"#hidStartTime"</span>).val());</span><br><span class="line">    $(<span class="string">"#EndTime"</span>).val($(<span class="string">"#hidEndTime"</span>).val());</span><br><span class="line">    $(<span class="string">"#BankName option[value='']"</span>).attr(<span class="string">"selected"</span>, <span class="literal">true</span>);</span><br><span class="line">    $(<span class="string">"#formTable input[type='text']"</span>).val(<span class="string">""</span>);</span><br><span class="line">    $(<span class="string">"#formTable select"</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="keyword">this</span>).find(<span class="string">"option:first"</span>).attr(<span class="string">"selected"</span>, <span class="string">"selected"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2 id="tu-pian-shang-chuan"><a href="#图片上传" class="headerlink" title="图片上传"></a>图片上传</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span> <span class="attr">action</span>=<span class="string">"http://192.168.1.155:8080/regulator/common/upload/image"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"file"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span>  <span class="attr">value</span>=<span class="string">"上传"</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"filePicker"</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">accept</span>=<span class="string">"image/*;capture=camera"</span> <span class="attr">class</span>=<span class="string">"input"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="biao-dan-ti-jiao"><a href="#表单提交" class="headerlink" title="表单提交"></a>表单提交</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> frm = $(<span class="string">'form'</span>);</span><br><span class="line">frm.submit(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        type: frm.attr(<span class="string">'method'</span>),</span><br><span class="line">        url: frm.attr(<span class="string">'action'</span>),</span><br><span class="line">        data: frm.serialize(),</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">            alert(<span class="string">'ok'</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        error:<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">            alert(err);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    e.preventDefault();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="fan-xu-lie-hua"><a href="#反序列化" class="headerlink" title="反序列化"></a>反序列化</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">serializeJson: <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> jsonObj = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    $.each(obj, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> value = $.trim($(<span class="keyword">this</span>).val());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (value !== <span class="string">''</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> key = $(<span class="keyword">this</span>).attr(<span class="string">'name'</span>);</span><br><span class="line">            key &amp;&amp; (jsonObj[key] = value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> jsonObj;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> JsonObj = $.serializeJson($(<span class="string">"#tableCondition"</span>).find(<span class="string">"select,input[type='text']"</span>));</span><br></pre></td></tr></table></figure>
<h2 id="huo-qu-url-zhong-chuan-di-de-can-shu"><a href="#获取-URL-中传递的参数" class="headerlink" title="获取 URL 中传递的参数"></a>获取 URL 中传递的参数</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$.urlParam = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> results = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'[\\?&amp;]'</span> + name + <span class="string">'=([^&amp;#]*)'</span>).exec(<span class="built_in">window</span>.location.href);</span><br><span class="line">    <span class="keyword">if</span> (!results) &#123; <span class="keyword">return</span> <span class="number">0</span>; &#125;</span><br><span class="line">    <span class="keyword">return</span> results[<span class="number">1</span>] || <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="tian-jia-shou-cang-jia"><a href="#添加收藏夹" class="headerlink" title="添加收藏夹"></a>添加收藏夹</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addFavorite</span>(<span class="params">url, title</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.all) &#123;</span><br><span class="line">        <span class="built_in">window</span>.external.addFavorite(url, title);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.sidebar) &#123;</span><br><span class="line">        <span class="built_in">window</span>.sidebar.addPanel(title, url, <span class="string">""</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="html-zi-fu-chuan-zhuan-yi"><a href="#html字符串转义" class="headerlink" title="html字符串转义"></a>html字符串转义</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">htmlEscape</span>(<span class="params">htmlString</span>) </span>&#123;</span><br><span class="line">    htmlString = htmlString.replace(<span class="regexp">/&amp;/g</span>, <span class="string">'&amp;amp;'</span>);</span><br><span class="line">    htmlString = htmlString.replace(<span class="regexp">/&lt;/g</span>, <span class="string">'&amp;lt;'</span>);</span><br><span class="line">    htmlString = htmlString.replace(<span class="regexp">/&gt;/g</span>, <span class="string">'&amp;gt;'</span>);</span><br><span class="line">    htmlString = htmlString.replace(<span class="regexp">/'/g</span>, <span class="string">'&amp;acute;'</span>);</span><br><span class="line">    htmlString = htmlString.replace(<span class="regexp">/"/g</span>, <span class="string">'&amp;quot;'</span>);</span><br><span class="line">    htmlString = htmlString.replace(<span class="regexp">/\|/g</span>, <span class="string">'&amp;brvbar;'</span>);</span><br><span class="line">    <span class="keyword">return</span> htmlString;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="she-zhi-cookie"><a href="#设置Cookie" class="headerlink" title="设置Cookie"></a>设置Cookie</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">name, value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> expires = (<span class="built_in">arguments</span>.length &gt; <span class="number">2</span>) ? <span class="built_in">arguments</span>[<span class="number">2</span>] : <span class="literal">null</span>;</span><br><span class="line">    <span class="built_in">document</span>.cookie = name + <span class="string">"="</span> + <span class="built_in">encodeURIComponent</span>(value) + ((expires == <span class="literal">null</span>) ? <span class="string">""</span> : (<span class="string">"; expires="</span> + expires.toGMTString())) + <span class="string">";path="</span> + <span class="built_in">window</span>.location.href;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="huo-qu-cookie"><a href="#获取Cookie" class="headerlink" title="获取Cookie"></a>获取Cookie</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> value = <span class="built_in">document</span>.cookie.match(<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^| )"</span> + name + <span class="string">"=([^;]*)(;|$)"</span>));</span><br><span class="line">    <span class="keyword">if</span> (value != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">decodeURIComponent</span>(value[<span class="number">2</span>]);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="shan-chu-cookie"><a href="#删除cookie" class="headerlink" title="删除cookie"></a>删除cookie</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeCookie</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> expires = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    expires.setTime(expires.getTime() - <span class="number">1000</span> * <span class="number">60</span>);</span><br><span class="line">    setCookie(name, <span class="string">""</span>, expires);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="fan-hui-ding-bu"><a href="#返回顶部" class="headerlink" title="返回顶部"></a>返回顶部</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// fade in .back-to-top</span></span><br><span class="line">$(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ($(<span class="keyword">this</span>).scrollTop() &gt; <span class="number">500</span>) &#123;</span><br><span class="line">        $(<span class="string">'.back-to-top'</span>).fadeIn();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $(<span class="string">'.back-to-top'</span>).fadeOut();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// scroll body to 0px on click</span></span><br><span class="line">$(<span class="string">'.back-to-top'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">'html, body'</span>).animate(&#123;</span><br><span class="line">        scrollTop: <span class="number">0</span>,</span><br><span class="line">        easing: <span class="string">'swing'</span></span><br><span class="line">    &#125;, <span class="number">750</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h1 id="pan-duan-shi-fou-wei-pc-liu-lan-qi"><a href="#判断是否为pc浏览器" class="headerlink" title="判断是否为pc浏览器"></a>判断是否为pc浏览器</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> userAgentInfo = navigator.userAgent;</span><br><span class="line">    <span class="keyword">var</span> Agents = [<span class="string">"Android"</span>, <span class="string">"iPhone"</span>,</span><br><span class="line">                <span class="string">"SymbianOS"</span>, <span class="string">"Windows Phone"</span>,</span><br><span class="line">                <span class="string">"iPad"</span>, <span class="string">"iPod"</span>];</span><br><span class="line">    <span class="keyword">var</span> flag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> v = <span class="number">0</span>; v &lt; Agents.length; v++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (userAgentInfo.indexOf(Agents[v]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            flag = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="pan-duan-shi-fou-wei-shou-ji-liu-lan-qi-huo-ipad-liu-lan-qi"><a href="#判断是否为手机浏览器或ipad浏览器" class="headerlink" title="判断是否为手机浏览器或ipad浏览器"></a>判断是否为手机浏览器或ipad浏览器</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isMobile</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> sUserAgent = navigator.userAgent.toLowerCase();</span><br><span class="line">    <span class="keyword">var</span> bIsIpad = sUserAgent.match(<span class="regexp">/ipad/i</span>) == <span class="string">"ipad"</span>;</span><br><span class="line">    <span class="keyword">var</span> bIsIphoneOs = sUserAgent.match(<span class="regexp">/iphone os/i</span>) == <span class="string">"iphone os"</span>;</span><br><span class="line">    <span class="keyword">var</span> bIsMidp = sUserAgent.match(<span class="regexp">/midp/i</span>) == <span class="string">"midp"</span>;</span><br><span class="line">    <span class="keyword">var</span> bIsUc7 = sUserAgent.match(<span class="regexp">/rv:1.2.3.4/i</span>) == <span class="string">"rv:1.2.3.4"</span>;</span><br><span class="line">    <span class="keyword">var</span> bIsUc = sUserAgent.match(<span class="regexp">/ucweb/i</span>) == <span class="string">"ucweb"</span>;</span><br><span class="line">    <span class="keyword">var</span> bIsAndroid = sUserAgent.match(<span class="regexp">/android/i</span>) == <span class="string">"android"</span>;</span><br><span class="line">    <span class="keyword">var</span> bIsCE = sUserAgent.match(<span class="regexp">/windows ce/i</span>) == <span class="string">"windows ce"</span>;</span><br><span class="line">    <span class="keyword">var</span> bIsWM = sUserAgent.match(<span class="regexp">/windows mobile/i</span>) == <span class="string">"windows mobile"</span>;</span><br><span class="line">    <span class="keyword">var</span> flag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (!(bIsIpad || bIsIphoneOs || bIsMidp || bIsUc7 || bIsUc || bIsAndroid || bIsCE || bIsWM) )&#123;</span><br><span class="line">        flag = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="pan-duan-shi-fou-wei-wei-xin-liu-lan-qi"><a href="#判断是否为微信浏览器" class="headerlink" title="判断是否为微信浏览器"></a>判断是否为微信浏览器</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isWeiXin</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> ua = navigator.userAgent.toLowerCase();</span><br><span class="line">    <span class="keyword">if</span>(ua.match(<span class="regexp">/MicroMessenger/i</span>) == <span class="string">'micromessenger'</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="zu-zhi-ye-mian-gun-dong"><a href="#阻止页面滚动" class="headerlink" title="阻止页面滚动"></a>阻止页面滚动</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.ontouchstart=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="huo-qu-shu-biao-zuo-biao"><a href="#获取鼠标坐标：" class="headerlink" title="获取鼠标坐标："></a>获取鼠标坐标：</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getMousePos</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> e = event || <span class="built_in">window</span>.event;</span><br><span class="line">    <span class="keyword">var</span> scrollX = <span class="built_in">document</span>.documentElement.scrollLeft || <span class="built_in">document</span>.body.scrollLeft;</span><br><span class="line">    <span class="keyword">var</span> scrollY = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop;</span><br><span class="line">    <span class="keyword">var</span> x = e.pageX || e.clientX + scrollX;</span><br><span class="line">    <span class="keyword">var</span> y = e.pageY || e.clientY + scrollY;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="string">'x'</span>: x, <span class="string">'y'</span>: y &#125;;</span><br><span class="line">&#125;</span><br><span class="line">onmousemove=<span class="string">"getMousePos(event)"</span></span><br><span class="line">getMousePos(e).x</span><br><span class="line">getMousePos(e).y</span><br></pre></td></tr></table></figure>
<h1 id="localstorage"><a href="#localStorage" class="headerlink" title="localStorage"></a>localStorage</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">localStorage.user = <span class="built_in">JSON</span>.stringify(user)</span><br><span class="line">localStorage.removeItem(<span class="string">'name'</span>)</span><br><span class="line">localStorage.clear()</span><br></pre></td></tr></table></figure>
<h1 id="ri-qi-ge-shi-hua"><a href="#日期格式化" class="headerlink" title="日期格式化"></a>日期格式化</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *   对Date的扩展，将 Date 转化为指定格式的String</span></span><br><span class="line"><span class="comment"> *   月(M)、日(d)、小时(h)、分(m)、秒(s)、季度(q) 可以用 1-2 个占位符，</span></span><br><span class="line"><span class="comment"> *   年(y)可以用 1-4 个占位符，毫秒(S)只能用 1 个占位符(是 1-3 位的数字)</span></span><br><span class="line"><span class="comment"> *   例子：</span></span><br><span class="line"><span class="comment"> *   fmtDate(new Date(), "yyyy-MM-dd hh:mm:ss.S") ==&gt; 2006-07-02 08:09:04.423</span></span><br><span class="line"><span class="comment"> *   fmtDate(new Date(), "yyyy-M-d h:m:s.S")      ==&gt; 2006-7-2 8:9:4.18</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> fmtDate = <span class="function"><span class="keyword">function</span>(<span class="params">date, fmt</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = &#123;</span><br><span class="line">        <span class="string">"M+"</span>: date.getMonth() + <span class="number">1</span>, <span class="comment">//月份</span></span><br><span class="line">        <span class="string">"d+"</span>: date.getDate(), <span class="comment">//日</span></span><br><span class="line">        <span class="string">"h+"</span>: date.getHours(), <span class="comment">//小时</span></span><br><span class="line">        <span class="string">"m+"</span>: date.getMinutes(), <span class="comment">//分</span></span><br><span class="line">        <span class="string">"s+"</span>: date.getSeconds(), <span class="comment">//秒</span></span><br><span class="line">        <span class="string">"q+"</span>: <span class="built_in">Math</span>.floor((date.getMonth() + <span class="number">3</span>) / <span class="number">3</span>), <span class="comment">//季度</span></span><br><span class="line">        <span class="string">"S"</span>: date.getMilliseconds() <span class="comment">//毫秒</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (<span class="regexp">/(y+)/</span>.test(fmt))</span><br><span class="line">        fmt = fmt.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>, (date.getFullYear() + <span class="string">""</span>).substr(<span class="number">4</span> - <span class="built_in">RegExp</span>.$<span class="number">1.</span>length));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> o)</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"("</span> + k + <span class="string">")"</span>).test(fmt))</span><br><span class="line">            fmt = fmt.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>, (<span class="built_in">RegExp</span>.$<span class="number">1.</span>length == <span class="number">1</span>) ? (o[k]) : ((<span class="string">"00"</span> + o[k]).substr((<span class="string">""</span> + o[k]).length)));</span><br><span class="line">    <span class="keyword">return</span> fmt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ri-qi-zhuan-huan"><a href="#日期转换" class="headerlink" title="日期转换"></a>日期转换</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *   对Date的扩展，将相差毫秒数转化为文字</span></span><br><span class="line"><span class="comment"> *   例子：</span></span><br><span class="line"><span class="comment"> *   MillisecondToDate(new Date() - new Date('2006-07-02')) ==&gt; 10年前</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> MillisecondToDate = <span class="function"><span class="keyword">function</span>(<span class="params">msd</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> time = <span class="built_in">parseFloat</span>(msd) / <span class="number">1000</span>;</span><br><span class="line">    <span class="keyword">var</span> str =<span class="string">""</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">null</span> != time &amp;&amp; <span class="string">""</span> != time) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (time &gt; <span class="number">60</span> &amp;&amp; time &lt; <span class="number">3600</span>) &#123;</span><br><span class="line">            str = <span class="built_in">parseInt</span>(time / <span class="number">60.0</span>) + <span class="string">" 分钟前"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (time &gt;= <span class="number">3600</span> &amp;&amp; time &lt; <span class="number">86400</span>) &#123;</span><br><span class="line">            str = <span class="built_in">parseInt</span>(time / <span class="number">3600.0</span>) + <span class="string">" 小时前"</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (time &gt;= <span class="number">86400</span> &amp;&amp; time &lt; <span class="number">86400</span>*<span class="number">30</span>) &#123;</span><br><span class="line">            str = <span class="built_in">parseInt</span>(time / <span class="number">86400.0</span>) + <span class="string">" 天前"</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (time &gt;= <span class="number">86400</span>*<span class="number">30</span> &amp;&amp; time &lt; <span class="number">86400</span>*<span class="number">365</span>) &#123;</span><br><span class="line">            str = <span class="built_in">parseInt</span>(time / (<span class="number">86400.0</span>*<span class="number">30</span>)) + <span class="string">" 个月前"</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(time &gt;= <span class="number">86400</span>*<span class="number">365</span>)&#123;</span><br><span class="line">            str = <span class="built_in">parseInt</span>(time / (<span class="number">86400.0</span>*<span class="number">365</span>)) + <span class="string">" 年前"</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            str = <span class="built_in">parseInt</span>(time) + <span class="string">" 秒前"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ke-long"><a href="#克隆" class="headerlink" title="克隆"></a>克隆</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(data))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="rgb-zhuan-16-jin-zhi"><a href="#RGB转16进制" class="headerlink" title="RGB转16进制"></a>RGB转16进制</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rgbToHex</span> (<span class="params">red, green, blue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> red === <span class="string">'string'</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> res = red.match(<span class="regexp">/\b\d&#123;1,3&#125;\b/g</span>).map(<span class="built_in">Number</span>)</span><br><span class="line">    red = res[<span class="number">0</span>]</span><br><span class="line">    green = res[<span class="number">1</span>]</span><br><span class="line">    blue = res[<span class="number">2</span>]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    <span class="keyword">typeof</span> red !== <span class="string">'number'</span> ||</span><br><span class="line">    <span class="keyword">typeof</span> green !== <span class="string">'number'</span> ||</span><br><span class="line">    <span class="keyword">typeof</span> blue !== <span class="string">'number'</span> ||</span><br><span class="line">    red &gt; <span class="number">255</span> ||</span><br><span class="line">    green &gt; <span class="number">255</span> ||</span><br><span class="line">    blue &gt; <span class="number">255</span></span><br><span class="line">  ) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'Expected three numbers below 256'</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> ((blue | green &lt;&lt; <span class="number">8</span> | red &lt;&lt; <span class="number">16</span>) | <span class="number">1</span> &lt;&lt; <span class="number">24</span>).toString(<span class="number">16</span>).slice(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="16-jin-zhi-zhuan-rgb"><a href="#16进制转RGB" class="headerlink" title="16进制转RGB"></a>16进制转RGB</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hexToRgb</span> (<span class="params">hex</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> hex !== <span class="string">'string'</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'Expected a string'</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  hex = hex.replace(<span class="regexp">/^#/</span>, <span class="string">''</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (hex.length === <span class="number">3</span>) &#123;</span><br><span class="line">    hex = hex[<span class="number">0</span>] + hex[<span class="number">0</span>] + hex[<span class="number">1</span>] + hex[<span class="number">1</span>] + hex[<span class="number">2</span>] + hex[<span class="number">2</span>]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> num = <span class="built_in">parseInt</span>(hex, <span class="number">16</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> [num &gt;&gt; <span class="number">16</span>, num &gt;&gt; <span class="number">8</span> &amp; <span class="number">255</span>, num &amp; <span class="number">255</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    
    
    

    

    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者：</strong>
    Maywzp
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://maywzp.github.io/2016/12/16/JS常用代码片段/" title="JS常用代码片段">https://maywzp.github.io/2016/12/16/JS常用代码片段/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>
    本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/javascript/" rel="tag"># javascript</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/12/09/canvas实例/" rel="next" title="canvas实例">
                <i class="fa fa-chevron-left"></i> canvas实例
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/12/18/nodeJs学习笔记/" rel="prev" title="nodeJS学习笔记">
                nodeJS学习笔记 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="Maywzp" />
            
              <p class="site-author-name" itemprop="name">Maywzp</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">55</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#bao-liu-liang-wei-xiao-shu"><span class="nav-number">1.</span> <span class="nav-text">保留两位小数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#jie-jue-shu-zu-yin-yong-wen-ti"><span class="nav-number">2.</span> <span class="nav-text">解决数组引用问题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#jie-jue-dui-xiang-yin-yong-wen-ti"><span class="nav-number">3.</span> <span class="nav-text">解决对象引用问题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#huo-qu-xia-la-kuang-wen-zi"><span class="nav-number">4.</span> <span class="nav-text">获取下拉框文字</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#huo-qu-xia-la-kuang-suo-yin"><span class="nav-number">5.</span> <span class="nav-text">获取下拉框索引</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#zu-zhi-mo-ren-shi-jian"><span class="nav-number">6.</span> <span class="nav-text">阻止默认事件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#zu-zhi-shi-jian-mou-pao"><span class="nav-number">7.</span> <span class="nav-text">阻止事件冒泡</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#dong-tai-yin-ru-javascript"><span class="nav-number">8.</span> <span class="nav-text">动态引入JavaScript</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#uri-bian-ma-fang-zhi-luan-ma"><span class="nav-number">9.</span> <span class="nav-text">uri编码:防止乱码</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#jia-ma-bi-xu-tao-liang-ceng"><span class="nav-number">9.1.</span> <span class="nav-text">加码(必须套两层)。</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jie-ma"><span class="nav-number">9.2.</span> <span class="nav-text">解码</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#json-cao-zuo"><span class="nav-number">10.</span> <span class="nav-text">JSON操作</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#zi-dong-hong-fa-shi-jian"><span class="nav-number">11.</span> <span class="nav-text">自动触发事件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#jin-qian-ge-shi-hua-jia-qian-fen-hao-bao-liu-liang-wei-xiao-shu"><span class="nav-number">12.</span> <span class="nav-text">金钱格式化（加千分号，保留两位小数）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#qian-jin"><span class="nav-number">13.</span> <span class="nav-text">前进</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#hou-tui"><span class="nav-number">14.</span> <span class="nav-text">后退</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#shua-xin"><span class="nav-number">15.</span> <span class="nav-text">刷新</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#hou-tui-bing-shua-xin-ye-mian"><span class="nav-number">16.</span> <span class="nav-text">后退并刷新页面</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#fu-xuan-kuang-quan-xuan"><span class="nav-number">17.</span> <span class="nav-text">复选框全选</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#form-biao-dan"><span class="nav-number">18.</span> <span class="nav-text">form表单</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#biao-tou"><span class="nav-number">18.1.</span> <span class="nav-text">表头</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chong-zhi-biao-dan"><span class="nav-number">18.2.</span> <span class="nav-text">重置表单</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tu-pian-shang-chuan"><span class="nav-number">18.3.</span> <span class="nav-text">图片上传</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#biao-dan-ti-jiao"><span class="nav-number">18.4.</span> <span class="nav-text">表单提交</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#fan-xu-lie-hua"><span class="nav-number">18.5.</span> <span class="nav-text">反序列化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#huo-qu-url-zhong-chuan-di-de-can-shu"><span class="nav-number">18.6.</span> <span class="nav-text">获取 URL 中传递的参数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#tian-jia-shou-cang-jia"><span class="nav-number">19.</span> <span class="nav-text">添加收藏夹</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#html-zi-fu-chuan-zhuan-yi"><span class="nav-number">20.</span> <span class="nav-text">html字符串转义</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#she-zhi-cookie"><span class="nav-number">21.</span> <span class="nav-text">设置Cookie</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#huo-qu-cookie"><span class="nav-number">22.</span> <span class="nav-text">获取Cookie</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#shan-chu-cookie"><span class="nav-number">23.</span> <span class="nav-text">删除cookie</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#fan-hui-ding-bu"><span class="nav-number">24.</span> <span class="nav-text">返回顶部</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#pan-duan-shi-fou-wei-pc-liu-lan-qi"><span class="nav-number">25.</span> <span class="nav-text">判断是否为pc浏览器</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#pan-duan-shi-fou-wei-shou-ji-liu-lan-qi-huo-ipad-liu-lan-qi"><span class="nav-number">26.</span> <span class="nav-text">判断是否为手机浏览器或ipad浏览器</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#pan-duan-shi-fou-wei-wei-xin-liu-lan-qi"><span class="nav-number">27.</span> <span class="nav-text">判断是否为微信浏览器</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#zu-zhi-ye-mian-gun-dong"><span class="nav-number">28.</span> <span class="nav-text">阻止页面滚动</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#huo-qu-shu-biao-zuo-biao"><span class="nav-number">29.</span> <span class="nav-text">获取鼠标坐标：</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#localstorage"><span class="nav-number">30.</span> <span class="nav-text">localStorage</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ri-qi-ge-shi-hua"><span class="nav-number">31.</span> <span class="nav-text">日期格式化</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ri-qi-zhuan-huan"><span class="nav-number">32.</span> <span class="nav-text">日期转换</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ke-long"><span class="nav-number">33.</span> <span class="nav-text">克隆</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#rgb-zhuan-16-jin-zhi"><span class="nav-number">34.</span> <span class="nav-text">RGB转16进制</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#16-jin-zhi-zhuan-rgb"><span class="nav-number">35.</span> <span class="nav-text">16进制转RGB</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Maywzp</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  







  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/canvas_lines.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>




  


  




	





  





  












  





  

  

  

  
  

  

  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=5.1.3"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=5.1.3"></script>


  


</body>
</html>
